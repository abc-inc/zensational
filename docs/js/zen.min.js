/*
 * Copyright 2018 The zensational authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
'use strict';window.z={};z.provide=function(module){return z.isDefAndNotNull(z[module])?z[module]:(z[module]={});};z.require=function(module){if(z.isDefAndNotNull(z[module])){return;}var request=new XMLHttpRequest();request.open("GET","/js/"+module.replace('.','/')+".js",false);request.addEventListener('load',function(event){var script=document.createElement('script');script.text=request.responseText;document.body.appendChild(script);});request.send();};z.isArrayLike=function(val){return z.isObject(val)&&z.isDefAndNotNull(val['length']);};z.isDefAndNotNull=function(val){return val!=null;};z.isFunction=function(val){var className=Object.prototype.toString.call(val);if(className==='[object Function]'){return true;}else if(z.isDefAndNotNull(val)&&typeof val.call!=='undefined'&&typeof val.propertyIsEnumerable!=='undefined'&&!val.propertyIsEnumerable('call')){return true;}return false;};z.isObject=function(val){var type=typeof val;return type==="object"&&val!=null||type==="function";};z.getCurrentTimestamp=function(){return+new Date();};if(typeof module!=='undefined'&&z.isDefAndNotNull(module['exports'])){module['exports']=z;}z.asserts=z.provide('asserts');z.asserts.AssertionError=function(message){this.message_=message;};z.asserts.AssertionError.prototype.getMessage=function(){return this.message_;};z.asserts.assert=function(cond,message){if(z.isFunction(cond)){if(!cond()){throw new z.asserts.AssertionError(message);}}else if(!cond){throw new z.asserts.AssertionError(message);}};z.provide('string');z.string.getRandomString=function(){var x=2147483648;return Math.floor(Math.random()*x).toString(36)+Math.abs(Math.floor(Math.random()*x)^ z.getCurrentTimestamp()).toString(36);};z.dom=z.provide('dom');z.dom.isElement=function(obj){return z.isObject(obj)&&obj.nodeType===1;};z.dom.getElementByClass=function(element){return z.dom.isElement(element)?element:document.getElementsByClassName(String(element)).item(0);};z.dom.getElementById=function(element){return z.dom.isElement(element)?element:document.getElementById(String(element));};z.dom.appendNode=function(element,child){element=z.dom.getElementById(element);z.dom.isElement(child)?(element.appendChild(child)):(element.innerHTML+=child);return element;};z.dom.replaceNode=function(element,newElement){z.dom.getElementById(element).replaceWith(newElement);};z.dom.removeChildren=function(element){element=z.dom.getElementById(element);while(z.isDefAndNotNull(element.firstChild)){element.removeChild(element.firstChild);}};z.dom.getParent=function(element,tagName){tagName=tagName.toUpperCase();element=z.dom.getElementById(element);while(z.isDefAndNotNull(element)&&element.tagName!==tagName){element=element.parentNode;}return element;};z.events=z.provide('events');z.require('dom');z.events.listen=function(element,type,listener,opt_useCapture){element=z.dom.getElementById(element);var types=(z.isArrayLike(type))?type:[type];for(var i=0;i < types.length;i++){element.addEventListener(type[i],listener,opt_useCapture);}};z.net=z.provide('net');z.require('asserts');z.net.get=function(url,listener){this.send({'method':'GET','url':url,'async':true,'listener':listener});};z.net.send=function(params){z.asserts.assert(z.isDefAndNotNull(params['url']),'"url" must be defined');z.asserts.assert(z.isDefAndNotNull(params['listener']),'"listener" must be defined');if(z.isDefAndNotNull(window['fetch'])){window.fetch(params['url'],params).then(params['listener']);}var request=new XMLHttpRequest();request.open(params['method']||'GET',params['url'],!!params['async']);request.addEventListener('load',params['listener']);request.send(params['data']);};z.provide('components');z.require('dom');z.require('string');z.components.NavBar=function(leftTitle,rightTitle){this.leftTitle_=leftTitle;this.rightTitle_=rightTitle;this.uid_=z.string.getRandomString();};z.components.NavBar.prototype.render=function(element){if(z.isDefAndNotNull(z.dom.getElementById(this.uid_))){return;}element=z.dom.getElementById(element);z.dom.appendNode(element,'<div id="'+this.uid_+'" class="z-navbar">'+this.renderButton_('left',this.leftTitle_,null)+this.renderButton_('right',this.rightTitle_,null)+'</div>');};z.components.NavBar.prototype.update=function(leftContent,rightContent){var element=z.dom.getElementById(this.uid_);if(!z.isDefAndNotNull(element)){return;}z.dom.removeChildren(element);this.updateButton_(element,'left',this.leftTitle_,leftContent);this.updateButton_(element,'right',this.rightTitle_,rightContent);};z.components.NavBar.prototype.updateButton_=function(element,direction,title,content){content=content||{};var link=content['link']||null;var text=content['text']||null;z.dom.appendNode(element,this.renderButton_(direction,title,link,text));};z.components.NavBar.prototype.renderButton_=function(direction,title,opt_link,opt_text){if(z.isDefAndNotNull(opt_link)){return '<a href="'+opt_link+'" class="z-navbar--link z-text--'+direction+'">'+'<span class="lnr lnr-arrow-'+direction+' z-align--'+direction+'"></span>'+'<div class="z-text--'+direction+'">'+'<span>'+title+'</span><br>'+'<span class="z-navbar--'+direction+'-text z-text--headline">'+(opt_text||'')+'</span>'+'</div>'+'</a>';}else{return '<div class="z-navbar--link"></div>';}};